exports=module.exports=SemVer;var debug;if(typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG))debug=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER");console.log.apply(console,e)};else debug=function(){};exports.SEMVER_SPEC_VERSION="2.0.0";var MAX_LENGTH=256;var MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;var re=exports.re=[];var src=exports.src=[];var R=0;var NUMERICIDENTIFIER=R++;src[NUMERICIDENTIFIER]="0|[1-9]\\d*";var NUMERICIDENTIFIERLOOSE=R++;src[NUMERICIDENTIFIERLOOSE]="[0-9]+";var NONNUMERICIDENTIFIER=R++;src[NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var MAINVERSION=R++;src[MAINVERSION]="("+src[NUMERICIDENTIFIER]+")\\."+"("+src[NUMERICIDENTIFIER]+")\\."+"("+src[NUMERICIDENTIFIER]+")";var MAINVERSIONLOOSE=R++;src[MAINVERSIONLOOSE]="("+src[NUMERICIDENTIFIERLOOSE]+")\\."+"("+src[NUMERICIDENTIFIERLOOSE]+")\\."+"("+src[NUMERICIDENTIFIERLOOSE]+")";var PRERELEASEIDENTIFIER=R++;src[PRERELEASEIDENTIFIER]="(?:"+src[NUMERICIDENTIFIER]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASEIDENTIFIERLOOSE=R++;src[PRERELEASEIDENTIFIERLOOSE]="(?:"+src[NUMERICIDENTIFIERLOOSE]+"|"+src[NONNUMERICIDENTIFIER]+")";var PRERELEASE=R++;src[PRERELEASE]="(?:-("+src[PRERELEASEIDENTIFIER]+"(?:\\."+src[PRERELEASEIDENTIFIER]+")*))";var PRERELEASELOOSE=R++;src[PRERELEASELOOSE]="(?:-?("+src[PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+src[PRERELEASEIDENTIFIERLOOSE]+")*))";var BUILDIDENTIFIER=R++;src[BUILDIDENTIFIER]="[0-9A-Za-z-]+";var BUILD=R++;src[BUILD]="(?:\\+("+src[BUILDIDENTIFIER]+"(?:\\."+src[BUILDIDENTIFIER]+")*))";var FULL=R++;var FULLPLAIN="v?"+src[MAINVERSION]+src[PRERELEASE]+"?"+src[BUILD]+"?";src[FULL]="^"+FULLPLAIN+"$";var LOOSEPLAIN="[v=\\s]*"+src[MAINVERSIONLOOSE]+src[PRERELEASELOOSE]+"?"+src[BUILD]+"?";var LOOSE=R++;src[LOOSE]="^"+LOOSEPLAIN+"$";var GTLT=R++;src[GTLT]="((?:<|>)?=?)";var XRANGEIDENTIFIERLOOSE=R++;src[XRANGEIDENTIFIERLOOSE]=src[NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";var XRANGEIDENTIFIER=R++;src[XRANGEIDENTIFIER]=src[NUMERICIDENTIFIER]+"|x|X|\\*";var XRANGEPLAIN=R++;src[XRANGEPLAIN]="[v=\\s]*("+src[XRANGEIDENTIFIER]+")"+"(?:\\.("+src[XRANGEIDENTIFIER]+")"+"(?:\\.("+src[XRANGEIDENTIFIER]+")"+"(?:"+src[PRERELEASE]+")?"+src[BUILD]+"?"+")?)?";var XRANGEPLAINLOOSE=R++;src[XRANGEPLAINLOOSE]="[v=\\s]*("+src[XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+src[XRANGEIDENTIFIERLOOSE]+")"+"(?:"+src[PRERELEASELOOSE]+")?"+src[BUILD]+"?"+")?)?";var XRANGE=R++;src[XRANGE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAIN]+"$";var XRANGELOOSE=R++;src[XRANGELOOSE]="^"+src[GTLT]+"\\s*"+src[XRANGEPLAINLOOSE]+"$";var LONETILDE=R++;src[LONETILDE]="(?:~>?)";var TILDETRIM=R++;src[TILDETRIM]="(\\s*)"+src[LONETILDE]+"\\s+";re[TILDETRIM]=new RegExp(src[TILDETRIM],"g");var tildeTrimReplace="$1~";var TILDE=R++;src[TILDE]="^"+src[LONETILDE]+src[XRANGEPLAIN]+"$";var TILDELOOSE=R++;src[TILDELOOSE]="^"+src[LONETILDE]+src[XRANGEPLAINLOOSE]+"$";var LONECARET=R++;src[LONECARET]="(?:\\^)";var CARETTRIM=R++;src[CARETTRIM]="(\\s*)"+src[LONECARET]+"\\s+";re[CARETTRIM]=new RegExp(src[CARETTRIM],"g");var caretTrimReplace="$1^";var CARET=R++;src[CARET]="^"+src[LONECARET]+src[XRANGEPLAIN]+"$";var CARETLOOSE=R++;src[CARETLOOSE]="^"+src[LONECARET]+src[XRANGEPLAINLOOSE]+"$";var COMPARATORLOOSE=R++;src[COMPARATORLOOSE]="^"+src[GTLT]+"\\s*("+LOOSEPLAIN+")$|^$";var COMPARATOR=R++;src[COMPARATOR]="^"+src[GTLT]+"\\s*("+FULLPLAIN+")$|^$";var COMPARATORTRIM=R++;src[COMPARATORTRIM]="(\\s*)"+src[GTLT]+"\\s*("+LOOSEPLAIN+"|"+src[XRANGEPLAIN]+")";re[COMPARATORTRIM]=new RegExp(src[COMPARATORTRIM],"g");var comparatorTrimReplace="$1$2$3";var HYPHENRANGE=R++;src[HYPHENRANGE]="^\\s*("+src[XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+src[XRANGEPLAIN]+")"+"\\s*$";var HYPHENRANGELOOSE=R++;src[HYPHENRANGELOOSE]="^\\s*("+src[XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+src[XRANGEPLAINLOOSE]+")"+"\\s*$";var STAR=R++;src[STAR]="(<|>)?=?\\s*\\*";for(var i=0;i<R;i++){debug(i,src[i]);if(!re[i])re[i]=new RegExp(src[i])}exports.parse=parse;function parse(e,r){if(e instanceof SemVer)return e;if(typeof e!=="string")return null;if(e.length>MAX_LENGTH)return null;var t=r?re[LOOSE]:re[FULL];if(!t.test(e))return null;try{return new SemVer(e,r)}catch(s){return null}}exports.valid=valid;function valid(e,r){var t=parse(e,r);return t?t.version:null}exports.clean=clean;function clean(e,r){var t=parse(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null}exports.SemVer=SemVer;function SemVer(e,r){if(e instanceof SemVer){if(e.loose===r)return e;else e=e.version}else if(typeof e!=="string"){throw new TypeError("Invalid Version: "+e)}if(e.length>MAX_LENGTH)throw new TypeError("version is longer than "+MAX_LENGTH+" characters");if(!(this instanceof SemVer))return new SemVer(e,r);debug("SemVer",e,r);this.loose=r;var t=e.trim().match(r?re[LOOSE]:re[FULL]);if(!t)throw new TypeError("Invalid Version: "+e);this.raw=e;this.major=+t[1];this.minor=+t[2];this.patch=+t[3];if(this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");if(!t[4])this.prerelease=[];else this.prerelease=t[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var r=+e;if(r>=0&&r<MAX_SAFE_INTEGER)return r}return e});this.build=t[5]?t[5].split("."):[];this.format()}SemVer.prototype.format=function(){this.version=this.major+"."+this.minor+"."+this.patch;if(this.prerelease.length)this.version+="-"+this.prerelease.join(".");return this.version};SemVer.prototype.inspect=function(){return'<SemVer "'+this+'">'};SemVer.prototype.toString=function(){return this.version};SemVer.prototype.compare=function(e){debug("SemVer.compare",this.version,this.loose,e);if(!(e instanceof SemVer))e=new SemVer(e,this.loose);return this.compareMain(e)||this.comparePre(e)};SemVer.prototype.compareMain=function(e){if(!(e instanceof SemVer))e=new SemVer(e,this.loose);return compareIdentifiers(this.major,e.major)||compareIdentifiers(this.minor,e.minor)||compareIdentifiers(this.patch,e.patch)};SemVer.prototype.comparePre=function(e){if(!(e instanceof SemVer))e=new SemVer(e,this.loose);if(this.prerelease.length&&!e.prerelease.length)return-1;else if(!this.prerelease.length&&e.prerelease.length)return 1;else if(!this.prerelease.length&&!e.prerelease.length)return 0;var r=0;do{var t=this.prerelease[r];var s=e.prerelease[r];debug("prerelease compare",r,t,s);if(t===undefined&&s===undefined)return 0;else if(s===undefined)return 1;else if(t===undefined)return-1;else if(t===s)continue;else return compareIdentifiers(t,s)}while(++r)};SemVer.prototype.inc=function(e,r){switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",r);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",r);break;case"prepatch":this.prerelease.length=0;this.inc("patch",r);this.inc("pre",r);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",r);this.inc("pre",r);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{var t=this.prerelease.length;while(--t>=0){if(typeof this.prerelease[t]==="number"){this.prerelease[t]++;t=-2}}if(t===-1)this.prerelease.push(0)}if(r){if(this.prerelease[0]===r){if(isNaN(this.prerelease[1]))this.prerelease=[r,0]}else this.prerelease=[r,0]}break;default:throw new Error("invalid increment argument: "+e)}this.format();this.raw=this.version;return this};exports.inc=inc;function inc(e,r,t,s){if(typeof t==="string"){s=t;t=undefined}try{return new SemVer(e,t).inc(r,s).version}catch(i){return null}}exports.diff=diff;function diff(e,r){if(eq(e,r)){return null}else{var t=parse(e);var s=parse(r);if(t.prerelease.length||s.prerelease.length){for(var i in t){if(i==="major"||i==="minor"||i==="patch"){if(t[i]!==s[i]){return"pre"+i}}}return"prerelease"}for(var i in t){if(i==="major"||i==="minor"||i==="patch"){if(t[i]!==s[i]){return i}}}}}exports.compareIdentifiers=compareIdentifiers;var numeric=/^[0-9]+$/;function compareIdentifiers(e,r){var t=numeric.test(e);var s=numeric.test(r);if(t&&s){e=+e;r=+r}return t&&!s?-1:s&&!t?1:e<r?-1:e>r?1:0}exports.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(e,r){return compareIdentifiers(r,e)}exports.major=major;function major(e,r){return new SemVer(e,r).major}exports.minor=minor;function minor(e,r){return new SemVer(e,r).minor}exports.patch=patch;function patch(e,r){return new SemVer(e,r).patch}exports.compare=compare;function compare(e,r,t){return new SemVer(e,t).compare(r)}exports.compareLoose=compareLoose;function compareLoose(e,r){return compare(e,r,true)}exports.rcompare=rcompare;function rcompare(e,r,t){return compare(r,e,t)}exports.sort=sort;function sort(e,r){return e.sort(function(e,t){return exports.compare(e,t,r)})}exports.rsort=rsort;function rsort(e,r){return e.sort(function(e,t){return exports.rcompare(e,t,r)})}exports.gt=gt;function gt(e,r,t){return compare(e,r,t)>0}exports.lt=lt;function lt(e,r,t){return compare(e,r,t)<0}exports.eq=eq;function eq(e,r,t){return compare(e,r,t)===0}exports.neq=neq;function neq(e,r,t){return compare(e,r,t)!==0}exports.gte=gte;function gte(e,r,t){return compare(e,r,t)>=0}exports.lte=lte;function lte(e,r,t){return compare(e,r,t)<=0}exports.cmp=cmp;function cmp(e,r,t,s){var i;switch(r){case"===":if(typeof e==="object")e=e.version;if(typeof t==="object")t=t.version;i=e===t;break;case"!==":if(typeof e==="object")e=e.version;if(typeof t==="object")t=t.version;i=e!==t;break;case"":case"=":case"==":i=eq(e,t,s);break;case"!=":i=neq(e,t,s);break;case">":i=gt(e,t,s);break;case">=":i=gte(e,t,s);break;case"<":i=lt(e,t,s);break;case"<=":i=lte(e,t,s);break;default:throw new TypeError("Invalid operator: "+r)}return i}exports.Comparator=Comparator;function Comparator(e,r){if(e instanceof Comparator){if(e.loose===r)return e;else e=e.value}if(!(this instanceof Comparator))return new Comparator(e,r);debug("comparator",e,r);this.loose=r;this.parse(e);if(this.semver===ANY)this.value="";else this.value=this.operator+this.semver.version;debug("comp",this)}var ANY={};Comparator.prototype.parse=function(e){var r=this.loose?re[COMPARATORLOOSE]:re[COMPARATOR];var t=e.match(r);if(!t)throw new TypeError("Invalid comparator: "+e);this.operator=t[1];if(this.operator==="=")this.operator="";if(!t[2])this.semver=ANY;else this.semver=new SemVer(t[2],this.loose)};Comparator.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'};Comparator.prototype.toString=function(){return this.value};Comparator.prototype.test=function(e){debug("Comparator.test",e,this.loose);if(this.semver===ANY)return true;if(typeof e==="string")e=new SemVer(e,this.loose);return cmp(e,this.operator,this.semver,this.loose)};exports.Range=Range;function Range(e,r){if(e instanceof Range&&e.loose===r)return e;if(!(this instanceof Range))return new Range(e,r);this.loose=r;this.raw=e;this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length});if(!this.set.length){throw new TypeError("Invalid SemVer Range: "+e)}this.format()}Range.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'};Range.prototype.format=function(){this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim();return this.range};Range.prototype.toString=function(){return this.range};Range.prototype.parseRange=function(e){var r=this.loose;e=e.trim();debug("range",e,r);var t=r?re[HYPHENRANGELOOSE]:re[HYPHENRANGE];e=e.replace(t,hyphenReplace);debug("hyphen replace",e);e=e.replace(re[COMPARATORTRIM],comparatorTrimReplace);debug("comparator trim",e,re[COMPARATORTRIM]);e=e.replace(re[TILDETRIM],tildeTrimReplace);e=e.replace(re[CARETTRIM],caretTrimReplace);e=e.split(/\s+/).join(" ");var s=r?re[COMPARATORLOOSE]:re[COMPARATOR];var i=e.split(" ").map(function(e){return parseComparator(e,r)}).join(" ").split(/\s+/);if(this.loose){i=i.filter(function(e){return!!e.match(s)})}i=i.map(function(e){return new Comparator(e,r)});return i};exports.toComparators=toComparators;function toComparators(e,r){return new Range(e,r).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})}function parseComparator(e,r){debug("comp",e);e=replaceCarets(e,r);debug("caret",e);e=replaceTildes(e,r);debug("tildes",e);e=replaceXRanges(e,r);debug("xrange",e);e=replaceStars(e,r);debug("stars",e);return e}function isX(e){return!e||e.toLowerCase()==="x"||e==="*"}function replaceTildes(e,r){return e.trim().split(/\s+/).map(function(e){return replaceTilde(e,r)}).join(" ")}function replaceTilde(e,r){var t=r?re[TILDELOOSE]:re[TILDE];return e.replace(t,function(r,t,s,i,n){debug("tilde",e,r,t,s,i,n);var a;if(isX(t))a="";else if(isX(s))a=">="+t+".0.0 <"+(+t+1)+".0.0";else if(isX(i))a=">="+t+"."+s+".0 <"+t+"."+(+s+1)+".0";else if(n){debug("replaceTilde pr",n);if(n.charAt(0)!=="-")n="-"+n;a=">="+t+"."+s+"."+i+n+" <"+t+"."+(+s+1)+".0"}else a=">="+t+"."+s+"."+i+" <"+t+"."+(+s+1)+".0";debug("tilde return",a);return a})}function replaceCarets(e,r){return e.trim().split(/\s+/).map(function(e){return replaceCaret(e,r)}).join(" ")}function replaceCaret(e,r){debug("caret",e,r);var t=r?re[CARETLOOSE]:re[CARET];return e.replace(t,function(r,t,s,i,n){debug("caret",e,r,t,s,i,n);var a;if(isX(t))a="";else if(isX(s))a=">="+t+".0.0 <"+(+t+1)+".0.0";else if(isX(i)){if(t==="0")a=">="+t+"."+s+".0 <"+t+"."+(+s+1)+".0";else a=">="+t+"."+s+".0 <"+(+t+1)+".0.0"}else if(n){debug("replaceCaret pr",n);if(n.charAt(0)!=="-")n="-"+n;if(t==="0"){if(s==="0")a=">="+t+"."+s+"."+i+n+" <"+t+"."+s+"."+(+i+1);else a=">="+t+"."+s+"."+i+n+" <"+t+"."+(+s+1)+".0"}else a=">="+t+"."+s+"."+i+n+" <"+(+t+1)+".0.0"}else{debug("no pr");if(t==="0"){if(s==="0")a=">="+t+"."+s+"."+i+" <"+t+"."+s+"."+(+i+1);else a=">="+t+"."+s+"."+i+" <"+t+"."+(+s+1)+".0"}else a=">="+t+"."+s+"."+i+" <"+(+t+1)+".0.0"}debug("caret return",a);return a})}function replaceXRanges(e,r){debug("replaceXRanges",e,r);return e.split(/\s+/).map(function(e){return replaceXRange(e,r)}).join(" ")}function replaceXRange(e,r){e=e.trim();var t=r?re[XRANGELOOSE]:re[XRANGE];return e.replace(t,function(r,t,s,i,n,a){debug("xRange",e,r,t,s,i,n,a);var o=isX(s);var c=o||isX(i);var E=c||isX(n);var p=E;if(t==="="&&p)t="";if(o){if(t===">"||t==="<"){r="<0.0.0"}else{r="*"}}else if(t&&p){if(c)i=0;if(E)n=0;if(t===">"){t=">=";if(c){s=+s+1;i=0;n=0}else if(E){i=+i+1;n=0}}else if(t==="<="){t="<";if(c)s=+s+1;else i=+i+1}r=t+s+"."+i+"."+n}else if(c){r=">="+s+".0.0 <"+(+s+1)+".0.0"}else if(E){r=">="+s+"."+i+".0 <"+s+"."+(+i+1)+".0"}debug("xRange return",r);return r})}function replaceStars(e,r){debug("replaceStars",e,r);return e.trim().replace(re[STAR],"")}function hyphenReplace(e,r,t,s,i,n,a,o,c,E,p,R,f){if(isX(t))r="";else if(isX(s))r=">="+t+".0.0";else if(isX(i))r=">="+t+"."+s+".0";else r=">="+r;if(isX(c))o="";else if(isX(E))o="<"+(+c+1)+".0.0";else if(isX(p))o="<"+c+"."+(+E+1)+".0";else if(R)o="<="+c+"."+E+"."+p+"-"+R;else o="<="+o;return(r+" "+o).trim()}Range.prototype.test=function(e){if(!e)return false;if(typeof e==="string")e=new SemVer(e,this.loose);for(var r=0;r<this.set.length;r++){if(testSet(this.set[r],e))return true}return false};function testSet(e,r){for(var t=0;t<e.length;t++){if(!e[t].test(r))return false}if(r.prerelease.length){for(var t=0;t<e.length;t++){debug(e[t].semver);if(e[t].semver===ANY)continue;if(e[t].semver.prerelease.length>0){var s=e[t].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return true}}return false}return true}exports.satisfies=satisfies;function satisfies(e,r,t){try{r=new Range(r,t)}catch(s){return false}return r.test(e)}exports.maxSatisfying=maxSatisfying;function maxSatisfying(e,r,t){return e.filter(function(e){return satisfies(e,r,t)}).sort(function(e,r){return rcompare(e,r,t)})[0]||null}exports.validRange=validRange;function validRange(e,r){try{return new Range(e,r).range||"*"}catch(t){return null}}exports.ltr=ltr;function ltr(e,r,t){return outside(e,r,"<",t)}exports.gtr=gtr;function gtr(e,r,t){return outside(e,r,">",t)}exports.outside=outside;function outside(e,r,t,s){e=new SemVer(e,s);r=new Range(r,s);var i,n,a,o,c;switch(t){case">":i=gt;n=lte;a=lt;o=">";c=">=";break;case"<":i=lt;n=gte;a=gt;o="<";c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,r,s)){return false}for(var E=0;E<r.set.length;++E){var p=r.set[E];var R=null;var f=null;p.forEach(function(e){if(e.semver===ANY){e=new Comparator(">=0.0.0")}R=R||e;f=f||e;if(i(e.semver,R.semver,s)){R=e}else if(a(e.semver,f.semver,s)){f=e}});if(R.operator===o||R.operator===c){return false}if((!f.operator||f.operator===o)&&n(e,f.semver)){return false}else if(f.operator===c&&a(e,f.semver)){return false}}return true}